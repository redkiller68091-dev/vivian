<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>月经周期记录助手</title>
    <style>
        :root {
            --primary-color: #ff7eb3;
            --secondary-color: #ffc2d9;
            --accent-color: #d6a3fb;
            --light-color: #f9f2f5;
            --dark-color: #333;
            --success-color: #a0d8b3;
            --warning-color: #ffd966;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Helvetica Neue', Arial, sans-serif;
        }
        
        body {
            background-color: #faf7f8;
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        
        .card h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary-color);
        }
        
        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .stat-item {
            text-align: center;
            padding: 15px;
            background: var(--light-color);
            border-radius: 8px;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #666;
        }
        
        .record-form {
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
        }
        
        button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #ff5c9b;
        }
        
        .history {
            margin-top: 30px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: var(--light-color);
            color: var(--primary-color);
            font-weight: 600;
        }
        
        tr:hover {
            background-color: rgba(255, 126, 179, 0.05);
        }
        
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        
        .calendar-header {
            grid-column: span 7;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .calendar-cell {
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-weight: 500;
        }
        
        .period-day {
            background-color: var(--primary-color);
            color: white;
        }
        
        .predicted-period {
            background-color: var(--secondary-color);
        }
        
        .ovulation-day {
            background-color: var(--accent-color);
            color: white;
        }
        
        .symptom-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .symptom-tag {
            background: var(--light-color);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
        }
        
        .privacy-note {
            background: #fff6f9;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid var(--primary-color);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>月经周期记录助手</h1>
            <p>轻松跟踪您的月经周期，了解身体规律</p>
        </header>
        
        <div class="dashboard">
            <div class="card">
                <h2>周期概览</h2>
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value">28</div>
                        <div class="stat-label">平均周期天数</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">5</div>
                        <div class="stat-label">平均经期天数</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">12月5日</div>
                        <div class="stat-label">预测下次经期</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">18</div>
                        <div class="stat-label">预计排卵日</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h2>本月日历</h2>
                <div class="calendar" id="calendar">
                    <!-- JavaScript will populate this -->
                </div>
            </div>
        </div>
        
        <div class="card record-form">
            <h2>记录新经期</h2>
            <form id="period-form">
                <div class="form-group">
                    <label for="start-date">开始日期</label>
                    <input type="date" id="start-date" required>
                </div>
                <div class="form-group">
                    <label for="end-date">结束日期</label>
                    <input type="date" id="end-date" required>
                </div>
                <div class="form-group">
                    <label for="symptoms">症状</label>
                    <select id="symptoms" multiple>
                        <option value="cramps">腹痛/痉挛</option>
                        <option value="headache">头痛</option>
                        <option value="backache">腰痛</option>
                        <option value="mood">情绪波动</option>
                        <option value="acne">痘痘</option>
                        <option value="fatigue">疲劳</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="notes">备注</label>
                    <textarea id="notes" rows="3"></textarea>
                </div>
                <button type="submit">保存记录</button>
            </form>
        </div>
        
        <div class="privacy-note">
            <strong>隐私提示：</strong>您的所有数据仅存储在您的设备上，我们不会收集任何个人信息。
        </div>
        
        <div class="card history">
            <h2>历史记录</h2>
            <table>
                <thead>
                    <tr>
                        <th>开始日期</th>
                        <th>结束日期</th>
                        <th>周期长度</th>
                        <th>症状</th>
                    </tr>
                </thead>
                <tbody id="history-table">
                    <!-- JavaScript will populate this -->
                </tbody>
            </table>
        </div>
        
        <div class="footer">
            <p>© 2023 月经周期记录助手 | 仅供个人参考，不能替代专业医疗建议</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化日历
            renderCalendar();
            
            // 初始化历史记录表格
            renderHistoryTable();
            
            // 表单提交事件
            document.getElementById('period-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const startDate = document.getElementById('start-date').value;
                const endDate = document.getElementById('end-date').value;
                const symptoms = Array.from(document.getElementById('symptoms').selectedOptions)
                                    .map(option => option.value);
                const notes = document.getElementById('notes').value;
                
                // 保存记录到本地存储
                savePeriodRecord({
                    startDate,
                    endDate,
                    symptoms,
                    notes
                });
                
                // 重置表单
                this.reset();
                
                // 更新历史记录表格
                renderHistoryTable();
                
                // 更新日历显示
                renderCalendar();
                
                alert('记录已保存！');
            });
        });
        
        // 渲染日历
        function renderCalendar() {
            const calendarEl = document.getElementById('calendar');
            calendarEl.innerHTML = '';
            
            // 创建日历标题
            const header = document.createElement('div');
            header.className = 'calendar-header';
            header.textContent = '2023年11月';
            calendarEl.appendChild(header);
            
            // 添加星期标题
            const daysOfWeek = ['日', '一', '二', '三', '四', '五', '六'];
            daysOfWeek.forEach(day => {
                const dayEl = document.createElement('div');
                dayEl.className = 'calendar-cell';
                dayEl.style.fontWeight = 'bold';
                dayEl.textContent = day;
                calendarEl.appendChild(dayEl);
            });
            
            // 添加日期单元格
            const daysInMonth = 30;
            const startDay = 3; // 假设本月从周三开始
            
            // 添加空白单元格
            for (let i = 0; i < startDay; i++) {
                const emptyEl = document.createElement('div');
                emptyEl.className = 'calendar-cell';
                calendarEl.appendChild(emptyEl);
            }
            
            // 添加日期
            for (let i = 1; i <= daysInMonth; i++) {
                const dayEl = document.createElement('div');
                dayEl.className = 'calendar-cell';
                dayEl.textContent = i;
                
                // 标记经期（示例数据）
                if (i >= 5 && i <= 9) {
                    dayEl.classList.add('period-day');
                }
                
                // 标记预测经期（示例数据）
                if (i >= 3 && i <= 7) {
                    dayEl.classList.add('predicted-period');
                }
                
                // 标记排卵日（示例数据）
                if (i === 18) {
                    dayEl.classList.add('ovulation-day');
                }
                
                calendarEl.appendChild(dayEl);
            }
        }
        
        // 渲染历史记录表格
        function renderHistoryTable() {
            const tableBody = document.getElementById('history-table');
            tableBody.innerHTML = '';
            
            // 从本地存储获取记录（这里使用模拟数据）
            const records = getStoredRecords();
            
            if (records.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `<td colspan="4" style="text-align: center;">暂无记录</td>`;
                tableBody.appendChild(row);
                return;
            }
            
            records.forEach(record => {
                const row = document.createElement('tr');
                
                // 计算周期长度
                const start = new Date(record.startDate);
                const end = new Date(record.endDate);
                const cycleLength = Math.floor((end - start) / (1000 * 60 * 60 * 24)) + 1;
                
                // 症状标签
                const symptomsHtml = record.symptoms.map(symptom => {
                    return `<span class="symptom-tag">${getSymptomName(symptom)}</span>`;
                }).join(' ');
                
                row.innerHTML = `
                    <td>${formatDate(record.startDate)}</td>
                    <td>${formatDate(record.endDate)}</td>
                    <td>${cycleLength}天</td>
                    <td>${symptomsHtml}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        // 保存记录到本地存储
        function savePeriodRecord(record) {
            // 获取现有记录
            const existingRecords = JSON.parse(localStorage.getItem('periodRecords') || '[]');
            
            // 添加新记录
            existingRecords.push(record);
            
            // 保存回本地存储
            localStorage.setItem('periodRecords', JSON.stringify(existingRecords));
        }
        
        // 从本地存储获取记录
        function getStoredRecords() {
            // 返回模拟数据（实际应用中从localStorage获取）
            return [
                { startDate: '2023-10-08', endDate: '2023-10-12', symptoms: ['cramps', 'mood'] },
                { startDate: '2023-09-10', endDate: '2023-09-14', symptoms: ['headache', 'fatigue'] },
                { startDate: '2023-08-13', endDate: '2023-08-17', symptoms: ['backache'] }
            ];
            
            // 实际代码应该使用：
            // return JSON.parse(localStorage.getItem('periodRecords') || '[]');
        }
        
        // 根据症状代码获取显示名称
        function getSymptomName(code) {
            const symptoms = {
                'cramps': '腹痛',
                'headache': '头痛',
                'backache': '腰痛',
                'mood': '情绪波动',
                'acne': '痘痘',
                'fatigue': '疲劳'
            };
            
            return symptoms[code] || code;
        }
        
        // 格式化日期显示
        function formatDate(dateString) {
            const date = new Date(dateString);
            return `${date.getMonth() + 1}月${date.getDate()}日`;
        }
    </script>
</body>
</html>